{
  "name": "Mod Favorites",
  "author": "Cobalt Official",
  "description": "Lets users star mods and view a Favorites tab in the Workshop.",
  "code": "(function () {\n  const STORAGE_KEY = 'cobaltFavorites';\n\n  function getFavorites() {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    return stored ? JSON.parse(stored) : [];\n  }\n\n  function saveFavorites(favs) {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(favs));\n  }\n\n  function toggleFavorite(modId) {\n    const favs = getFavorites();\n    const index = favs.indexOf(modId);\n    if (index >= 0) {\n      favs.splice(index, 1);\n    } else {\n      favs.push(modId);\n    }\n    saveFavorites(favs);\n    updateStars();\n  }\n\n  function updateStars() {\n    const favs = getFavorites();\n    document.querySelectorAll('[data-mod]').forEach(card => {\n      const modId = card.getAttribute('data-mod');\n      let star = card.querySelector('.mod-fav-star');\n      if (!star) {\n        star = document.createElement('span');\n        star.className = 'mod-fav-star';\n        star.textContent = '⭐';\n        star.style.cursor = 'pointer';\n        star.style.marginLeft = '8px';\n        star.title = 'Favorite this mod';\n        star.addEventListener('click', e => {\n          e.stopPropagation();\n          toggleFavorite(modId);\n        });\n        card.querySelector('.mod-name')?.appendChild(star);\n      }\n      star.style.opacity = favs.includes(modId) ? '1' : '0.3';\n    });\n  }\n\n  function createFavoritesTab() {\n    const tabBar = document.querySelector('.workshop-tabs');\n    if (!tabBar) return;\n\n    const favTab = document.createElement('button');\n    favTab.textContent = '⭐ Favorites';\n    favTab.className = 'workshop-tab';\n    favTab.addEventListener('click', () => {\n      const favs = getFavorites();\n      document.querySelectorAll('[data-mod]').forEach(card => {\n        const modId = card.getAttribute('data-mod');\n        card.style.display = favs.includes(modId) ? '' : 'none';\n      });\n    });\n    tabBar.appendChild(favTab);\n  }\n\n  function injectStyles() {\n    const style = document.createElement('style');\n    style.textContent = `\n      .mod-fav-star {\n        font-size: 1.2em;\n        margin-left: 6px;\n        transition: opacity 0.2s;\n      }\n      .workshop-tab {\n        margin-left: 10px;\n        padding: 6px 12px;\n        background: #eee;\n        border: none;\n        border-radius: 4px;\n        cursor: pointer;\n      }\n      .workshop-tab:hover {\n        background: #ddd;\n      }\n    `;\n    document.head.appendChild(style);\n  }\n\n  function waitForWorkshop() {\n    const interval = setInterval(() => {\n      const cards = document.querySelectorAll('[data-mod]');\n      const tabBar = document.querySelector('.workshop-tabs');\n      if (cards.length > 0 && tabBar) {\n        clearInterval(interval);\n        injectStyles();\n        updateStars();\n        createFavoritesTab();\n      }\n    }, 500);\n  }\n\n  waitForWorkshop();\n})();"
}
