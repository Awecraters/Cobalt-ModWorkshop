{
  "name": "Mod Favorites",
  "author": "Cobalt Official",
  "description": "Adds a Favorites tab with star indicators and buttons for all mods.",
  "code": "(function () {\n  const STORAGE_KEY = 'cobaltFavorites';\n\n  function getFavorites() {\n    return JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');\n  }\n\n  function saveFavorites(favs) {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(favs));\n  }\n\n  function isFavorited(name) {\n    return getFavorites().includes(name);\n  }\n\n  function toggleFavorite(name) {\n    const favs = getFavorites();\n    const i = favs.indexOf(name);\n    if (i >= 0) favs.splice(i, 1);\n    else favs.push(name);\n    saveFavorites(favs);\n    updateAllCards();\n    renderFavoritesTab();\n  }\n\n  function decorateCard(card) {\n    const nameEl = card.querySelector('strong');\n    if (!nameEl) return;\n    const name = nameEl.textContent.trim();\n    if (!name) return;\n\n    // Star\n    let star = card.querySelector('.mod-fav-star');\n    if (!star) {\n      star = document.createElement('span');\n      star.className = 'mod-fav-star';\n      star.textContent = '⭐';\n      star.style.marginLeft = '8px';\n      nameEl.appendChild(star);\n    }\n    star.style.opacity = isFavorited(name) ? '1' : '0.3';\n\n    // Button\n    let btn = card.querySelector('.mod-fav-btn');\n    if (!btn) {\n      btn = document.createElement('button');\n      btn.className = 'mod-fav-btn';\n      btn.style.marginTop = '5px';\n      card.appendChild(btn);\n    }\n    btn.textContent = isFavorited(name) ? 'Unfavorite' : 'Favorite';\n    btn.onclick = () => toggleFavorite(name);\n  }\n\n  function updateAllCards() {\n    document.querySelectorAll('.mod-card').forEach(decorateCard);\n  }\n\n  function renderFavoritesTab() {\n    const favs = getFavorites();\n    const favContainer = document.getElementById('favorites');\n    if (!favContainer) return;\n    favContainer.innerHTML = '';\n\n    document.querySelectorAll('.mod-card').forEach(card => {\n      const nameEl = card.querySelector('strong');\n      const name = nameEl?.textContent.trim();\n      if (favs.includes(name)) {\n        const clone = card.cloneNode(true);\n        decorateCard(clone);\n        favContainer.appendChild(clone);\n      }\n    });\n  }\n\n  function createFavoritesTab() {\n    const tabs = document.getElementById('cobalt-tabs');\n    if (!tabs || document.getElementById('favorites-tab')) return;\n\n    const tab = document.createElement('div');\n    tab.className = 'cobalt-tab';\n    tab.id = 'favorites-tab';\n    tab.dataset.tab = 'favorites';\n    tab.textContent = 'Favorites';\n    tabs.appendChild(tab);\n\n    const content = document.createElement('div');\n    content.id = 'favorites';\n    content.className = 'cobalt-tab-content';\n    document.getElementById('cobalt-sidebar').appendChild(content);\n\n    tab.onclick = () => {\n      document.querySelectorAll('.cobalt-tab').forEach(t => t.classList.remove('active'));\n      document.querySelectorAll('.cobalt-tab-content').forEach(c => c.classList.remove('active'));\n      tab.classList.add('active');\n      content.classList.add('active');\n      renderFavoritesTab();\n    };\n  }\n\n  function injectStyles() {\n    const style = document.createElement('style');\n    style.textContent = `.mod-fav-star { font-size: 1.2em; transition: opacity 0.2s; }`;\n    document.head.appendChild(style);\n  }\n\n  function observeCards() {\n    const observer = new MutationObserver(() => updateAllCards());\n    observer.observe(document.body, { childList: true, subtree: true });\n  }\n\n  function init() {\n    injectStyles();\n    createFavoritesTab();\n    updateAllCards();\n    observeCards();\n  }\n\n  const wait = setInterval(() => {\n    if (document.getElementById('cobalt-tabs') && document.getElementById('cobalt-sidebar')) {\n      clearInterval(wait);\n      init();\n    }\n  }, 500);\n})();"
}
